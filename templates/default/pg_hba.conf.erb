# postgresql.conf
#
# Generated by Chef for <%= node['fqdn'] %>
# Local modifications will be overwritten.
#


# TYPE  DATABASE    USER        CIDR-ADDRESS          METHOD
<% node['postgresql']['pg_hba'].each do |auth| -%>
<%= auth[:type] %>  <%= auth[:db] %>  <%= auth[:user] %>  <%= auth[:addr] %>  <%= auth[:method] %>
<% end -%>

# TYPE  DATABASE        USER            ADDRESS                 METHOD
<% if node[:postgresql][:pg_hba_defaults] %>
local   all             postgres                                peer
local   all             all                                     peer
host    all             all             127.0.0.1/32            md5
host    all             all             ::1/128                 md5
<% end %>
